<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/classList.css">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js"></script>
</head>


<body>
<header>
    <h1>사용자정보</h1>
    <nav>
        <td>학번 : </td>
        <td th:text="${session.loginMember.id}"></td>
        <span>&nbsp;이름: </span>
        <td th:text="${session.loginMember.name}"></td>
        <span>&nbsp;학과: </span>
        <span th:text="${session.loginMember.department}"></span>
        <span>&nbsp;학년: </span>
        <span th:text="${session.loginMember.grade}"></span>
        <span>&nbsp;최소수강신청학점: </span>
        <span th:text="${session.loginMember.maxCredits}"></span>
        <span>&nbsp;최대수강신청학점: </span>
        <span th:text="${session.loginMember.minCredits}"></span>
        <span>&nbsp;현재수강신청학점: </span>
        <span th:text="${session.loginMember.nowCredits}"></span>
    </nav>
    <button class="button" onclick="location.href='/logout'" style="vertical-align:middle; float:right;">
        <span>로그아웃</span></button>
</header>


<main>
    <!-- 유의사항/ 수강신청 검색 목록 -->
    <section>
        <div class="container">
            <div class="" style="overflow-y: scroll; height:23rem;">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th>교과목명</th>
                        <th>학수번호</th>
                        <th>이수구분</th>
                        <th>분반</th>
                        <th>학점</th>
                        <th>담당교수</th>
                        <th>수강인원</th>
                        <th>제한인원</th>
                        <th>강의실명</th>
                        <th>강의시간</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="class : ${classes}">
                        <div class="row">
                            <td th:text="${class.className}"></td>
                            <td th:text="${class.id}"></td>
                            <td th:text="${class.division}"></td>
                            <td th:text="${class.distribution}"></td>
                            <td th:text="${class.credit}"></td>
                            <td th:text="${class.professor}"></td>
                            <td th:text="${class.curStudent}"></td>
                            <td th:text="${class.maxStudent}"></td>
                            <td th:text="${class.lectureRoom}"></td>
                            <td th:text="${class.time}"></td>
                            <td>
                                <button th:onclick="postTodo([[${class}]])">신청</button>
                            </td>
                        </div>
                    </tr>
                    </tbody>
                </table>
            </div><!-- /container -->
        </div>
        <hr/>
    </section>
    <!--장바구니, 프로필, 신청완료 과목 -->
    <section id="section-second">

        <div class="container">
            <nav>
                <!--Modal-->
                <button type="button" class="btn btn-primary me-1" data-bs-toggle="modal" data-bs-target="#myModal">
                    유의사항
                </button>
                <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="myModalLabel" role="dialog">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="myModalLabel">
                                    제목
                                </h5>
                            </div>
                            <div class="modal-body" align="center">
                                내용
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-bs-dismiss="modal">확인</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!--모달 끝-->

                <button type="button" class="btn btn-primary" data-toggle="button" aria-pressed="false" id="jangba"
                        autocomplete="off">
                    장바구니
                </button>
                <button type="button" class="btn btn-primary" data-toggle="button" aria-pressed="false" id=""
                        autocomplete="off">
                    신청 목록
                </button>
            </nav>
            <div class="container bluebox" style="overflow: hidden; ">
                <!-- 사용자 프로필 -->
<!--                <aside id="aside-first">-->
<!--                    <div th:if="${session.loginMember != null}" class="container col-sm-2 spanlist aside1">-->
<!--                        <div class="card bg-light mb-3" style="max-width: 18rem;">-->
<!--                            <div class="card-body">-->
<!--                                <div class="card-text" width="150px;" id="text-list">-->
<!--                                    <div class="normal">-->
<!--                                        <td>학번 : </td>-->
<!--                                        <td th:text="${session.loginMember.id}"></td>-->
<!--                                        <span>이름: </span>-->
<!--                                        <td th:text="${session.loginMember.name}"></td>-->
<!--                                        <span>학과: </span>-->
<!--                                        <span th:text="${session.loginMember.department}"></span>-->
<!--                                        <span>학년: </span>-->
<!--                                        <span th:text="${session.loginMember.grade}"></span>-->
<!--                                        <span>최소수강신청학점: </span>-->
<!--                                        <span th:text="${session.loginMember.maxCredits}"></span>-->
<!--                                        <span>최대수강신청학점: </span>-->
<!--                                        <span th:text="${session.loginMember.minCredits}"></span>-->
<!--                                        <span>현재수강신청학점: </span>-->
<!--                                        <span th:text="${session.loginMember.minCredits}"></span>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </aside>-->
                <!-- 토글바 메뉴 콘텐츠 -->
                <tr th:each="class : ${classes}">
                <aside class="col-sm-2 spanlist" id="aside-second">
                    <div class="card bg-primary mb-3 text-white">
                        <a href="#" class="btn">
                            <div class="card-body">
                                    <h5 class="card-title type-2" th:text="${class.id}">class.id</h5>
                                    <div class="card-text" width="50px;">
                                        <div class="type-1">
                                            <span th:text="${class.className}"/></span><br/>
                                        </div>
                                        <div class="type-2">
                                            <span>학수 번호</span><br/>
                                        </div>
                                        <div class="type-3">
                                            <span>이수 구분</span><br/>
                                            <span>분반</span><br/>
                                            <span>학점</span><br/>
                                        </div>
                                        <div class="type-4">
                                            <span>담당 교수</span><br/>
                                        </div>
                                        <div class="type-5">
                                            <span>수강 인원</span><br/>
                                            <span>제한 인원</span><br/>
                                        </div>
                                        <div class="type-6">
                                            <span>강의실 명</span><br/>
                                            <span>강의 시간</span><br/>
                                        </div>
                                    </div>
                            </div>
                        </a>
                    </div>
                </aside>
                                </tr>
            </div>
        </div>
    </section>
</main>
<script>
    // ajax로 포스트 돌리는것.
    function postTodo(classJson) {
        let xhr = new XMLHttpRequest();
        xhr.open('post', 'http://localhost:8080/register');
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        console.log(JSON.stringify(classJson))
        xhr.send(JSON.stringify(classJson));
    }
</script>
</body>
</html>